<html>
<head>
<script type="text/javascript">
console.log("=== START ===")

if (!window.PublicKeyCredential) {
    console.log("PublicKeyCredential not supported.")
} else {
    console.log("PublicKeyCredential supported.")
}

const options = {
    publicKey: {
        rp: { name: "example.com"},
        user: {
            name: "john.appleseed@example.com",
            id: "aaaaaaaa",  // userIdBuffer,
            displayName: "John Appleseed"
        },
        publicKeyCredParams: [ { type: "public-key", alg: -7 } ],
        challenge: "bbbbbbbb",  // challengeBuffer,
        authenticatorSelection: { authenticatorAttachment: "platform" },
        attestation: "direct"
    }
};
    
console.log(options)

const publicKeyCredential = await navigator.credentials.create(options)
    
console.log(publicKeyCredential)

/*
const isAvailable = await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();

if (isAvailable) {
    console.log("OK");
} else {
    console.log("NG");
}
*/
//navigator.credentials.create()

//navigator.credentials.get()

console.log("--- END ---")

</script>
</head>
<body>
<h1>WebAuthentication API 7</h1>
</body>
</html>
